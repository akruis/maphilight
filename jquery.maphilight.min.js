(function(h){var b,l,c,m,p,o,k,e,j,a,n,g;l=!!document.createElement("canvas").getContext;b=(function(){var r=document.createElement("div");r.innerHTML='<v:shape id="vml_flag1" adj="1" />';var q=r.firstChild;q.style.behavior="url(#default#VML)";return q?typeof q.adj=="object":true})();if(!(l||b)){h.fn.maphilight=function(){return this};return}if(l){e=function(q){return Math.max(0,Math.min(parseInt(q,16),255))};j=function(q,r){return"rgba("+e(q.substr(0,2))+","+e(q.substr(2,2))+","+e(q.substr(4,2))+","+r+")"};c=function(q){var r=h('<canvas style="width:'+(q.width-1)+"px;height:"+(q.height-1)+'px;" class="maphilightcanvas"></canvas>').get(0);r.height=q.height-1;r.width=q.width-1;r.getContext("2d").clearRect(0,0,r.width,r.height);return r};var f=function(s,q,t,r,u){r=r||0;u=u||0;s.beginPath();if(q=="rect"){s.rect(t[0]+r,t[1]+u,t[2]-t[0],t[3]-t[1])}else{if(q=="poly"){s.moveTo(t[0]+r,t[1]+u);for(i=2;i<t.length;i+=2){s.lineTo(t[i]+r,t[i+1]+u)}}else{if(q=="circ"){s.arc(t[0]+r,t[1]+u,t[2],0,Math.PI*2,false)}}}s.closePath()};m=function(s,v,w,z,q){var u,r=s.getContext("2d");if(z.shadow){r.save();if(z.shadowPosition=="inside"){f(r,v,w);r.clip()}var t=s.width*100;var y=s.height*100;f(r,v,w,t,y);r.shadowOffsetX=z.shadowX-t;r.shadowOffsetY=z.shadowY-y;r.shadowBlur=z.shadowRadius;r.shadowColor=j(z.shadowColor,z.shadowOpacity);var x=z.shadowFrom;if(!x){if(z.shadowPosition=="outside"){x="fill"}else{x="stroke"}}if(x=="stroke"){r.strokeStyle="rgba(0,0,0,1)";r.stroke()}else{if(x=="fill"){r.fillStyle="rgba(0,0,0,1)";r.fill()}}r.restore();if(z.shadowPosition=="outside"){r.save();f(r,v,w);r.globalCompositeOperation="destination-out";r.fillStyle="rgba(0,0,0,1);";r.fill();r.restore()}}r.save();f(r,v,w);if(z.fill){r.fillStyle=j(z.fillColor,z.fillOpacity);r.fill()}if(z.stroke){r.strokeStyle=j(z.strokeColor,z.strokeOpacity);r.lineWidth=z.strokeWidth;r.stroke()}r.restore();if(z.fade){h(s).css("opacity",0).animate({opacity:1},100)}return r};p=function(q){q.getContext("2d").clearRect(0,0,q.width,q.height)}}else{c=function(q){return h('<var style="zoom:1;overflow:hidden;display:block;width:'+(q.width-1)+"px;height:"+(q.height-1)+'px;" class="maphilightcanvas"></var>').get(0)};m=function(r,v,w,z,q){var x,y,t,u;for(var s in w){w[s]=parseInt(w[s],10)}x='<v:fill color="#'+z.fillColor+'" opacity="'+(z.fill?z.fillOpacity:0)+'" />';y=(z.stroke?'strokeweight="'+z.strokeWidth+'" stroked="t" strokecolor="#'+z.strokeColor+'"':'stroked="f"');t='<v:stroke opacity="'+z.strokeOpacity+'"/>';if(v=="rect"){u=h('<v:rect name="'+q+'" filled="t" '+y+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+w[0]+"px;top:"+w[1]+"px;width:"+(w[2]-w[0])+"px;height:"+(w[3]-w[1])+'px;"></v:rect>')}else{if(v=="poly"){u=h('<v:shape name="'+q+'" filled="t" '+y+' coordorigin="0,0" coordsize="'+r.width+","+r.height+'" path="m '+w[0]+","+w[1]+" l "+w.join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+r.width+"px;height:"+r.height+'px;"></v:shape>')}else{if(v=="circ"){u=h('<v:oval name="'+q+'" filled="t" '+y+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(w[0]-w[2])+"px;top:"+(w[1]-w[2])+"px;width:"+(w[2]*2)+"px;height:"+(w[2]*2)+'px;"></v:oval>')}}}u.get(0).innerHTML=x+t;h(r).append(u)};p=function(r){var q=h("<div>"+r.innerHTML+"</div>");q.children("[name=highlighted]").remove();h(r).html(q.html())}}o=function(r){var q,s=r.getAttribute("coords").split(",");for(q=0;q<s.length;q++){s[q]=parseFloat(s[q])}return[r.getAttribute("shape").toLowerCase().substr(0,4),s]};n=function(s,r){var q=h(s);return h.extend({},r,h.metadata?q.metadata():false,q.data("maphilight"))};a=function(q){if(!q.complete){return false}if(typeof q.naturalWidth!="undefined"&&q.naturalWidth===0){return false}return true};k={position:"absolute"};g=function(v,q,w,u){var r,t,s=["position","display"];v=h(v);if(u){v.addClass(u===true?q.attr("class"):u)}if(w){v.zIndex(q.zIndex()+1);v.css("border-color","transparent")}v.css("pointer-events","none");for(r=0;r<s.length;++r){t=q.css(s[r]);if(t!==undefined){v.css(s[r],t)}}};var d=false;h.fn.maphilight=function(q){q=h.extend({},h.fn.maphilight.defaults,q);if(!l&&!d){h(window).ready(function(){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var s=document.createStyleSheet();var r=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"];h.each(r,function(){s.addRule("v\\:"+this,"behavior: url(#default#VML); antialias:true")})});d=true}return this.each(function(){var v,r,s,x,t,w,u;v=this;r=h(v);s=h.extend({},q,h.metadata?r.metadata():false,r.data("maphilight"));if(!s.setupHilightEvent&&!a(v)){return window.setTimeout(function(){r.maphilight(q)},200)}t=r.get(0).getAttribute("usemap");if(!t){return}x=h('map[name="'+t.substr(1)+'"]');if(!(r.is('img,input[type="image"]')&&t&&x.size()>0)){return}u=function(){if(r.hasClass("maphilighted")){r.removeClass("maphilighted");if(s.useWrapper){var z=r.parent();r.insertBefore(z);z.remove()}else{r.prevAll(".maphilightcanvas").remove()}var y=r.data("maphilight_original_style");if(y){r.attr("style",y);r.data("maphilight_original_style",undefined)}h(x).off(".maphilight").find("area[coords]").off(".maphilight");if(s.setupHilightEvent){h(x).on(s.setupHilightEvent+".maphilight",w)}}};w=function(){var B,A,z,y;if(!a(v)){return window.setTimeout(function(){w()},200)}u();A=c(v);h(A).css(k);r.data("maphilight_original_style",r.attr("style"));if(s.useWrapper){B=h("<div></div>").css({background:'url("'+v.src+'")',backgroundSize:v.width+"px "+v.height+"px",width:v.width,height:v.height,overflow:"visible"});g(B,r,false,s.wrapClass);r.before(B).css("opacity",0).css(k).remove();if(b){r.css("filter","Alpha(opacity=0)")}B.append(r)}else{if(!s.ccsPointerEvents){var C=r.clone();C.css("opacity",0).addClass("maphilightcanvas").zIndex(r.zIndex()+2);if(b){C.css("filter","Alpha(opacity=0)")}r.before(C)}}g(A,r,!s.useWrapper,s.wrapClass);y=function(H){var D,F,E;F=n(this,s);if(!F.neverOn&&!F.alwaysOn){D=o(this);E=m(A,D[0],D[1],F,"highlighted");if(s.callback){s.callback(this,D,E)}if(F.groupBy){(typeof F.groupBy=="string")&&(F.groupBy=[F.groupBy]);var G=h(this);h.each(F.groupBy,function(J,K){var I;if(/^[a-zA-Z][\-a-zA-Z]+$/.test(K)){I=x.find("area["+K+'="'+G.attr(K)+'"]')}else{I=x.find(K)}var L=this;I.each(function(){if(this!=L){var N=n(this,s);if(!N.neverOn&&!N.alwaysOn){var M=o(this);m(A,M[0],M[1],N,"highlighted")}}})})}if(!l){h(A).append("<v:rect></v:rect>")}}};h(x).on("alwaysOn.maphilight",function(){if(z){p(z)}if(!l){h(A).empty()}h(x).find("area[coords]").each(function(){var D,F;F=n(this,s);if(F.alwaysOn){if(!z&&l){z=c(v);h(z).css(k);g(z,r,!s.useWrapper,s.wrapClass);r.before(z)}for(var E in F){if(E.substr&&E.length>=10&&E.substr(0,8)=="alwaysOn"){F[E[8].toLowerCase()+E.substr(9)]=F[E]}}D=o(this);if(l){m(z,D[0],D[1],F,"")}else{m(A,D[0],D[1],F,"")}}})});if(s.removeHilightEvent){h(x).on(s.removeHilightEvent+".maphilight",u)}h(x).trigger("alwaysOn.maphilight").find("area[coords]").on("mouseover.maphilight",y).on("mouseout.maphilight",function(D){p(A)});r.before(A);r.addClass("maphilighted")};if(s.setupHilightEvent){h(x).on(s.setupHilightEvent+".maphilight",w)}else{w()}})};h.fn.maphilight.defaults={fill:true,fillColor:"000000",fillOpacity:0.2,stroke:true,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,fade:true,alwaysOn:false,neverOn:false,groupBy:false,wrapClass:true,shadow:false,shadowX:0,shadowY:0,shadowRadius:6,shadowColor:"000000",shadowOpacity:0.8,shadowPosition:"outside",shadowFrom:false,useWrapper:true,ccsPointerEvents:function(){if(navigator.appName=="Microsoft Internet Explorer"){var r=navigator.userAgent;if(r.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)!=null){var q=parseFloat(RegExp.$1);if(q<11){return false}}}return true}(),setupHilightEvent:false,removeHilightEvent:false};if("rwdImageMaps" in h.fn){h.fn.maphilight.defaults.setupHilightEvent="rwdImageMaps_changed";h.fn.maphilight.defaults.removeHilightEvent="rwdImageMaps_invalid"}})(jQuery);